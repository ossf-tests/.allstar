optConfig:
  optOutStrategy: true
action: issue
groups:
  - name: "All allstar-actions-* test repos"
    repos:
      - name: "allstar-actions-*"
    rules:
      - name: "Deny old Gradle Wrapper validation Action versions"
        method: deny
        priority: high
        actions:
          - name: "gradle/wrapper-validation-action"
            version: "< 1.0.4"
      - name: "Deny very very old Gradle Wrapper validation Action versions"
        method: deny
        priority: critical
        actions:
          - name: "gradle/wrapper-validation-action"
            version: "< 1.0.0"
      - name: "Deny Node.js tooling Actions"
        method: deny
        actions:
          - name: "actions/setup-node"
          - name: "completely/fakeaction"
  - name: "Go repos"
    repos:
      - language:
          - go
        # exclude all repos not starting with "allstar-actions-"
        exclude:
          - exclude:
              - name: "allstar-actions-*"
    rules:
      - name: "Require that Go repos use lint Action"
        method: "require"
        requireAll: false
        mustPass: true
        actions:
          - name: "matoous/golangci-lint-action"
            version: ">= 1.23.3"
          - name: "Jerome1337/golint-action"
            version: ">= 1.0.2"
          - name: "Mushus/golangci-linter"
            version: ">= v1.1.2"
      - name: "Go build"
        method: "require"
        mustPass: true
        actions:
          - name: actions/setup-go
